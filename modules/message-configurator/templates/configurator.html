<!-- Message Configurator Template (sin header ni tabs) -->
<div class="message-configurator-module">
    <!-- Row 2: Mensaje y Acciones -->
    <div class="message-section">
        <div class="message-header">
            <h3>✏️ Mensaje</h3>
            <button class="btn btn-link" data-action="use-template">
                📋 Usar plantilla
            </button>
        </div>
        
        <!-- Textarea único estilo legacy -->
        <div class="textarea-wrapper">
            <textarea id="message-text" 
                      data-field="text"
                      class="legacy-textarea"
                      rows="8" 
                      maxlength="500"
                      placeholder="Escribe aquí tu mensaje..."></textarea>
            <div class="char-counter">
                <span id="char-count">0</span> / 500 caracteres
            </div>
        </div>
        
        <!-- Selector de voz justo debajo del textarea -->
        <div class="form-group" style="margin-top: 1rem;">
            <label>Voz del anuncio:</label>
            <select id="message-voice" data-field="voice" class="form-control" style="max-width: 300px;">
                <option value="cristian">👨 Cristian (Juvenil)</option>
                <option value="fernanda">👩 Fernanda (Profesional)</option>
                <option value="valeria">👩 Valeria (Alegre)</option>
                <option value="yorman">👨 Yorman (Profundo)</option>
                <option value="alejandro">👨 Alejandro (Neutral)</option>
                <option value="rosa">👩 Rosa (Amigable)</option>
                <option value="vicente">👨 Vicente (Versátil)</option>
                <option value="zabra">👩 Zabra (Dinámica)</option>
                <option value="azucena">👩 Azucena (Expresiva)</option>
                <option value="ninoska">👩 Ninoska (Enérgica)</option>
                <option value="ruben">👨 Rubén (Profesional)</option>
                <option value="santiago">👨 Santiago (Clara)</option>
                <option value="luis">👨 Luis (Profunda)</option>
            </select>
        </div>
        
        <!-- Botones de acción debajo del textarea -->
        <div class="message-actions">
            <button class="btn btn-primary" data-action="generate-audio">
                🎧 Generar Audio
            </button>
            <button class="btn btn-success" data-action="save-message" id="saveMessageBtn" style="display: none;">
                💾 Guardar en Biblioteca
            </button>
        </div>
    </div>
    
    <!-- Audio Player (justo después del mensaje) -->
    <div id="audio-player-container" class="audio-section" style="display: none;">
        <div class="result-header">
            <h3>🎵 Anuncio Generado</h3>
            <button class="btn btn-secondary" data-action="clear-result">
                ✖️ Limpiar
            </button>
        </div>
        
        <div class="audio-container">
            <audio id="audio-player" controls></audio>
        </div>
        
        <div class="audio-actions">
            <button class="btn btn-success" data-action="send-radio">
                📻 Enviar a Radio
            </button>
            <button class="btn btn-secondary" data-action="download-audio">
                💾 Descargar
            </button>
        </div>
        
        <div class="form-group">
            <label>Texto procesado:</label>
            <div id="processedText" class="processed-text"></div>
        </div>
    </div>
    
    <!-- Row 3: Controles de Voz SIMPLIFICADOS -->
    <div class="controls-section">
        <div class="controls-header">
            <h3>🎛️ Controles de Voz</h3>
            <button class="btn btn-link" data-action="reset-controls">
                ↺ Restaurar valores
            </button>
        </div>
        
        <!-- Controles en una sola fila -->
        <div class="voice-controls-container">
            <div class="controls-row">
                <!-- Expresividad -->
                <div class="control-item">
                    <div id="style-slider-container" 
                         data-component="styleSlider" 
                         data-slider-config='{"label":"🎭 Expresividad","icon":"","min":0,"max":100,"unit":"%","value":50}'></div>
                </div>
                
                <!-- Estabilidad -->
                <div class="control-item">
                    <div id="stability-slider-container" 
                         data-component="stabilitySlider" 
                         data-slider-config='{"label":"🎯 Estabilidad","icon":"","min":0,"max":100,"unit":"%","value":75}'></div>
                </div>
                
                <!-- Fidelidad -->
                <div class="control-item">
                    <div id="similarity-slider-container" 
                         data-component="similaritySlider" 
                         data-slider-config='{"label":"🔊 Fidelidad","icon":"","min":0,"max":100,"unit":"%","value":80}'></div>
                </div>
                
                <!-- Speaker Boost Toggle -->
                <div class="control-item control-item--toggle">
                    <div id="speaker-boost-container" data-component="speakerBoostToggle"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Estado -->
    <div id="generation-status" class="status-container"></div>
</div>